schema: '2.0'
stages:
  process:
    cmd: hibayes-process --config files/config.yaml --data data/data.csv --out 
      .output/process/
    deps:
    - path: ../../../src/hibayes/
      hash: md5
      md5: bd09a6269f7fad6497ab1e381f6fe2e2.dir
      size: 510108
      nfiles: 104
    - path: data/data.csv
      hash: md5
      md5: 629b340763529be066dc64936b980476
      size: 40304
    params:
      files/config.yaml:
        data_process:
          processors:
          - extract_observed_feature:
              feature_name: first_is_chosen
          - extract_features:
              categorical_features:
              - llm_pair
              - grader
              effect_coding_for_main_effects: true
              interactions: true
              continuous_features:
              - length_diff
              standardise: true
    outs:
    - path: .output/process/
      hash: md5
      md5: b5515b3c0cef2ebb904c8bb6ac6e5f73.dir
      size: 41329
      nfiles: 7
  model:
    cmd: hibayes-model --config files/config.yaml --analysis-state 
      .output/process/ --out .output/model/
    deps:
    - path: ../../../src/hibayes/
      hash: md5
      md5: bd09a6269f7fad6497ab1e381f6fe2e2.dir
      size: 510108
      nfiles: 104
    - path: .output/process/
      hash: md5
      md5: b5515b3c0cef2ebb904c8bb6ac6e5f73.dir
      size: 41329
      nfiles: 7
    params:
      files/config.yaml:
        check:
          checkers:
          - prior_predictive_plot:
              interactive: false
          - divergences
          - r_hat
          - ess_bulk
          - ess_tail
          - posterior_predictive_plot:
              interactive: false
          - waic
        model:
          path: ../custom_model.py
          models:
          - name: pairwise_logistic_model
            config:
              tag: with_length_diff
              main_effects:
              - llm_pair
              - grader
              - length_diff
              effect_coding_for_main_effects: true
          - name: pairwise_logistic_model
            config:
              tag: without_length_diff
              main_effects:
              - llm_pair
              - grader
              effect_coding_for_main_effects: true
    outs:
    - path: .output/model/
      hash: md5
      md5: 2255c7defbfe6ff0855c111ad281cddc.dir
      size: 29378826
      nfiles: 29
  communicate:
    cmd: hibayes-comm --config files/config.yaml --analysis-state .output/model/
      --out .output/communicate/
    deps:
    - path: ../../../src/hibayes/
      hash: md5
      md5: bd09a6269f7fad6497ab1e381f6fe2e2.dir
      size: 510108
      nfiles: 104
    - path: .output/model/
      hash: md5
      md5: 2255c7defbfe6ff0855c111ad281cddc.dir
      size: 29378826
      nfiles: 29
    params:
      files/config.yaml:
        communicate:
          path: ../custom_communicators.py
          communicators:
          - forest_plot:
              vars:
              - grader_effects
              - llm_pair_effects
              - grader_length_diff_effects
              combined: true
              vertical_line: 0
          - summary_table
          - model_comparison_plot
    outs:
    - path: .output/communicate/
      hash: md5
      md5: ed6d7a105245d0d1be46b589bc335298.dir
      size: 29112466
      nfiles: 28
